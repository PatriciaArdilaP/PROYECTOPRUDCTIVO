{% extends "base.html" %}

{% block title %}Tienda • Maquillaje sin género{% endblock %}

{% block hero %}
<section class="hero hero--shop" aria-label="Portada de la tienda">
  <!-- Imagen de fondo -->
  <div class="hero__media">
    <img
      class="hero__img"
      src="{{ url_for('static', filename='img/productos_tienda.jpg') }}"
      alt="Productos de maquillaje en tonos suaves"
    >
  </div>

  <!-- Contenido superpuesto -->
  <div class="container hero__content">
    <h1 class="hero__title">Nuestra Tienda</h1>
    <p class="hero__subtitle">Explora productos diseñados para todas las identidades</p>
    <a class="btn btn--accent" href="#categorias">Ver categorías</a>
  </div>
</section>
{% endblock %}

{% block content %}

<!-- CATEGORÍAS -->
<section id="categorias" class="shop-categories" aria-labelledby="cat-title">
  <div class="container">
    <h2 id="cat-title" class="shop__title">Shop by Category</h2>

    <div class="cat-grid">
      <a class="cat-card" href="#">
        <div class="cat-thumb">
          <img src="{{ url_for('static', filename='img/categoria_labios.jpg') }}" alt="Labios">
        </div>
        <span class="cat-label">Labios</span>
      </a>

      <a class="cat-card" href="#">
        <div class="cat-thumb">
          <img src="{{ url_for('static', filename='img/categoria_ojos.jpg') }}" alt="Ojos">
        </div>
        <span class="cat-label">Ojos</span>
      </a>

      <a class="cat-card" href="#">
        <div class="cat-thumb">
          <img src="{{ url_for('static', filename='img/categoria_serum.jpg') }}" alt="Serum">
        </div>
        <span class="cat-label">Serum</span>
      </a>

      <a class="cat-card" href="#">
        <div class="cat-thumb">
          <img src="{{ url_for('static', filename='img/categoria_cremas.jpg') }}" alt="Cremas">
        </div>
        <span class="cat-label">Cremas</span>
      </a>

      <a class="cat-card" href="#">
        <div class="cat-thumb">
          <img src="{{ url_for('static', filename='img/categoria_polvos.jpg') }}" alt="Polvos">
        </div>
        <span class="cat-label">Polvos</span>
      </a>
    </div>
  </div>
</section>

<!-- PRODUCTOS -->
<section id="productos" class="products-section" aria-labelledby="products-title">
  <div class="container">
    <h2 id="products-title" class="shop__title">Hand Picked Products</h2>

    <!-- Tabs decorativos (sin JS) -->
    <nav class="filter-tabs" aria-label="Filtros">
      <a href="#" class="is-active">Cream</a>
      <a href="#">Serum</a>
      <a href="#">Eyeliner</a>
    </nav>

    <div class="products-grid">
      {% for p in products %}
      <article class="product-card">
        <div class="product-media">
          {% if p.badge %}
            <span class="product-badge {{ 'product-badge--sale' if p.badge=='SALE' else 'product-badge--new' }}">
              {{ p.badge }}
            </span>
          {% endif %}
          <img src="{{ url_for('static', filename=p.img) }}" alt="{{ p.name }}">
        </div>

        <h3 class="product-title">{{ p.name }}</h3>

        <div class="product-meta">
          <span class="stars" aria-label="{{ p.stars|default(4) }} de 5">
            {{ "★" * (p.stars|default(4)|round(0,'floor')|int) }}{{ "☆" * (5 - (p.stars|default(4)|round(0,'floor')|int)) }}
          </span>
          <div class="price-wrap">
            <span class="price">
              ${{ "{:,.0f}".format(p.price).replace(",", ".") }}
            </span>
            {% if p.old %}
            <span class="price price--old">
              ${{ "{:,.0f}".format(p.old).replace(",", ".") }}
            </span>
            {% endif %}
          </div>
        </div>

        <!-- Botón agregar al carrito (backend Flask) -->
        <form action="{{ url_for('cart_add') }}" method="post" class="addcart-form">
          <input type="hidden" name="id" value="{{ p.id }}">
          <button type="submit" class="btn btn--accent btn--wide">
            Agregar al carrito
          </button>
        </form>
      </article>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}
